---
title: Публичные и внутренние формы. Контроль доступа
kbId:
tags:
    - форма записи
    - форма
    - доступ к форме
    - ограничение доступа к форме
    - публичная форма
    - внутренняя форма
    - разграничение доступа
hide:
    - tags
---

# Публичные и внутренние формы. Контроль доступа {: #form_access_control}

Для любого шаблона (кроме шаблона процесса) можно создать неограниченное число форм. На них можно поместить разные атрибуты, а сами формы могут предназначаться для различных категорий пользователей. Например, специалист отдела поддержки должен видеть только основную информацию по заявке, а руководитель — различные метрики по ее выполнению.

Доступ пользователей к формам определяется с помощью [ролей][roles] и настройки типа формы.

!!! question "Определения"

    Предусмотрено два типа форм: **публичная** и **внутренняя**.

    - К **публичной** форме можно перейти с помощью селектора форм <i class="fa-light fa-angle-down anchor"></i> рядом с заголовком записи.
    - **Внутренняя** форма не отображается в селекторе форм. 
        - **Внутрення** форма отображается, только если она вложена в другую форму или указана в качестве формы для записей (например, при запуске процесса, при создании записи, в диалоговых окнах).
        - К **внутренней** форме можно перейти по прямой ссылке.
      - Вложенная форма отображается в составе родительской формы независимо от того, является ли она **внутренней** или **публичной**, и независимо от разрешения на просмотр вложенной формы в роли пользователя.
      - Ни **внутренняя**, ни **публичная** форма не отображается, если роль пользователя не разрешает просмотр данной формы.
      - По умолчанию формы являются **публичными**. Чтобы ограничить доступ к форме через селектор форм, необходимо сменить тип формы на **внутреннюю**.

!!! note "Примечание"

    В **пользовательской задаче** процесса отображается только определённая форма связанного шаблона записи, и селектор форм недоступен.
    
    У формы пользовательской задачи не предусмотрена смена типа **внутреннюю** или **публичную**.

## Прикладная задача

Для шаблона записи _«Заявки»_ требуется создать формы _«Клиент»_ и _«Диспетчер»_. 

Форма _«Диспетчер»_ не должна быть доступна через селектор форм <i class="js-default-anchor  fal  fa-angle-down  anchor"></i>. Перейти к этой форме должно осуществляться по прямой ссылке.

## Настройка форм записи

1. В шаблоне _«Заявки»_ создайте следующие атрибуты:

    | Название                | Тип                 | Свойства                                                                        |
    | ----------------------- | ------------------- | ------------------------------------------------------------------------------- |
    | _Тип ТС_                | **Список значений** | Добавьте значения _«легковой автомобиль»_, _«автобус»_, _«грузовой автомобиль»_ |
    | _Количество пассажиров_ | **Число**           | **Количество знаков после запятой: 0**                                          |
    | _Водитель_              | **Аккаунт**         |                                                                                 |

2. Поместите на **основную форму** шаблона атрибуты _«Тип ТС»_ и _«Количество пассажиров»_.
3. Создайте форму _«Клиент»_ и поместите на неё атрибут _«Количество пассажиров»_.
4. Создайте форму _«Диспетчер»_ и поместите на неё атрибуты _«Тип ТС»_, _«Количество пассажиров»_, _«Водитель»_.
5. В свойствах формы _«Диспетчер»_ выберите **тип** «**Внутренняя**».

## Тестирование

1. Создайте новую запись в шаблоне _«Заявки»_.
2. Откроется основная форма шаблона.
3. Нажмите селектор <i class="fa-light fa-angle-down  anchor"></i>.
   - В раскрывающемся списке под селектором будут отображаться **основная форма** шаблона и форма _«Клиент»_.
   - Форма _«Диспетчер»_ в списке отображаться не будет.
4. Выберите форму _«Клиент»_.
5. Чтобы перейти к форме _«Диспетчер»_, используйте ссылку вида:

    ```
    http://your-host/#form/<oa.XX>/<form.XX>/<RecordID>
    ```

    **Здесь:**

    - `http://your-host/` — адрес сервера **{{ productName }}**;
    - `<oa.XX>` — ID шаблона записи _«Заявки»_ (его видно в [списке шаблонов][просмотр-списка-шаблонов-приложения]);
    - `<form.XX>` — ID формы _«Диспетчер»_ (его видно в адресной строке браузера в [конструкторе формы][form_designer]);
    - `<RecordID>` — ID записи _«Заявки»_.

--8<-- "related_topics_heading.md"

**[Формы. Определения, редактирование, удаление, использование списка форм][forms]**

**[Стартовая форма и форма пользовательской задачи][process_diagram_forms]**

**[Роли в приложении. Определения, настройка, объединение, удаление][roles]**

{%
include-markdown ".snippets/hyperlinks_mkdocs_to_kb_map.md"
%}
