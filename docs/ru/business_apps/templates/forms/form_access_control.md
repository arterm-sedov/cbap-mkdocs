---
title: Контроль доступа к формам
kbId:
tags:
    - форма записи
    - форма
    - доступ к форме
    - ограничение доступа к форме
hide:
    - tags
---

# Контроль доступа к формам {: #form_access_control}

Для одного шаблона записи можно сделать неограниченное число форм. На них могут быть вынесены разные атрибуты, а сами они — предназначаться для отличных категорий пользователей. Нажав на селектор <i class="js-default-anchor  fal  fa-angle-down  anchor"></i> рядом с заголовком экземпляра записи, можно переключиться между доступными формами. Однако, чтобы ограничить доступ через селектор, надо изменить тип формы.

Существует два типа формы:

- **Публичная** — выберите этот тип, чтобы к форме можно было перейти с помощью селектора форм рядом с заголовком формы;
- **Внутренняя** — выберите этот тип, чтобы форма отображалась, только если она вложена в другую форму или указана в качестве формы для записей (например, при запуске процесса, при создании записи, в диалоговых окнах).

!!! warning "Внимание"

    Внутренняя форма будет доступна всем пользователям, но только по прямой ссылке на неё. С помощью селектора форм <i class="js-default-anchor  fal  fa-angle-down  anchor"></i> на неё переключаться нельзя.

    Если требуется, чтобы форма не отображалась для определённых пользователей ни при каких условиях, то следует создать [роль][roles] и настроить в ней разрешения на доступ к форме.

## Прикладная задача

Для шаблона _«Заявки»_ требуется создать формы записи _«Для клиента»_ и _«Для диспетчера»_. Форма _«Для диспетчера»_ не должна быть доступна через селектор форм <i class="js-default-anchor  fal  fa-angle-down  anchor"></i>. Чтобы перейти к этой форме, надо воспользоваться прямой ссылкой на неё.

## Настройка форм записи

1. В шаблоне _«Заявки»_ создайте следующие атрибуты:

| Название              | Тип             | Свойства                                                                  |
| --------------------- | --------------- | ------------------------------------------------------------------------- |
| _Тип ТС_                | **Список значений** | Добавьте значения _«легковой автомобиль»_, _«автобус»_, _«грузовой автомобиль»_ |
| _Количество пассажиров_ | **Число**           | **Количество знаков после запятой: 0**                                       |
| _Водитель_              | **Аккаунт**         |                                                                           |

2. Создайте форму _«Для клиента»_ атрибут и _«Количество пассажиров»_.
3. Создайте новую форму _«Для диспетчеров»_ и добавьте на неё атрибуты _«Тип ТС»_, _«Количество пассажиров»_, _«Водитель»_.
4. Выберите **внутренний** тип формы.
5. Добавьте на **основную форму** атрибуты _«Тип ТС»_ и _«Количество пассажиров»_.

## Тестирование

1. Создайте новую запись в шаблоне _«Заявки»_.
2. Откроется основная форма записи.
3. Нажмите на селектор <i class="js-default-anchor  fal  fa-angle-down  anchor"></i> и перейдите на форму _«Для клиента»_.
4. Форма _«Для диспетчера»_ в селекторе отображаться не будет.
5. Чтобы перейти к форме _«Для диспетчера»_, используйте ссылку вида:

```
http://your-host/#form/<oa.XX>/<form.XX>/<RecordID>
```

**Здесь:**

- `http://your-host/` — адрес сервера **{{ productName }}**;
- `<oa.XX>` — ID шаблона записи _«Заявки»_;
- `<form.XX>` — ID формы _«Для диспетчера»_;
- `<RecordID>` — ID записи _«Заявки»_.

--8<-- "related_topics_heading.md"

**[Формы. Определения, редактирование, удаление, использование списка форм][forms]**

**[Стартовая форма и форма пользовательской задачи][process_diagram_forms]**

**[Роли в приложении. Определения, настройка, объединение, удаление][roles]**

{%
include-markdown ".snippets/hyperlinks_mkdocs_to_kb_map.md"
%}
