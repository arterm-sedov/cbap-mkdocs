---
title: Урок 4. Мониторинг и аналитика
kbId: 4865
---

# Урок 4. Мониторинг и аналитика {: #lesson_4 }

## Введение

В ходе этого урока вы научитесь просматривать **историю выполнения процесса** и создавать **информационные страницы** (дашборды) с диаграммами для просмотра статистики за определённый период.

**Предусловия:** пройден [Урок 3. Мой первый бизнес-процесс][lesson_3].

**Расчётная продолжительность:** 10 мин.

{% include-markdown ".snippets/tutorial_version_notice.md" %}

<div class="admonition question" markdown="block">

## Определения {: .admonition-title #definitions}

**{{ productName }}** позволяет анализировать состояние запущенных и завершённых экземпляров бизнес-процессов.

Доступна следующая информация об истории процесса:

- текущий этап процесса — позиции **токенов** на диаграмме;
- путь выполнения процесса;
- цепочка событий для каждого элемента диаграммы процесса;
- информация о каждом шаге (исполнитель задачи, срок выполнения и т. д.);
- ошибки, возникшие в ходе выполнения процесса.

**Токен** в нотации BPMN и в **{{ productName }}** — это текущая точка выполнения процесса (фишка, которая движется по диаграмме). Токен перемещается по диаграмме процесса. На процессе может быть несколько токенов, каждый из которых следует по собственному пути.

</div>

## Мониторинг исполнения бизнес-процесса

Просмотрим историю экземпляра процесса _«Заказ автотранспорта»_.

1. В списке шаблонов откройте шаблон процесса _«Заказ автотранспорта»_, дважды нажав его.
2. Откройте список экземпляров процесса, нажав кнопку «**Перейти к экземплярам**» на вкладке «**Свойства**» шаблона процесса.
3. В списке выберите один из запущенных экземпляров процесса, дважды нажав его.

    _![Список экземпляров процесса](https://kb.comindware.ru/assets/img_62430c349e3ab.png)_

4. Отобразится представление истории процесса, в котором активный элемент диаграммы будет выделен зелёным цветом.
5. Выберите задачу _«Отменить поездку»_ на диаграмме процесса.
6. На панели справа отобразится информация о её выполнении.

    !!! question "Просмотр истории процесса"

        Представление истории процесса показывает диаграмму экземпляра процесса и содержит элементы для управления выполнением процесса и его мониторинга.

        - Предусмотрены следующие кнопки управления процессом:
            - **Остановить процесс** — удаление всех токенов с диаграммы экземпляра процесса. **Статус** процесса сменится на «**Отменён**». Эта кнопка отображается, если на диаграмме имеется хотя бы один токен и не выбран ни один элемент.
            - **Архивировать** — архивирование экземпляра процесса. Архивные экземпляры не отображаются в списке экземпляров (если в конфигурации соответствующей таблицы не установлен флажок «**Показывать архивные записи**»).
            - **Создать токен** — создание токена на выбранном элементе. Эта кнопка отображается, если выбран элемент диаграммы.
        - На информационной панели справа (которую можно вызвать нажатием кнопки <i class="fa-light fa-sidebar-flip">‌</i>) отображаются следующие вкладки:
            - **Свойства** — сведения об экземпляре процесса.
                - **Статус**
                    - **Активен** — на элементах диаграммы процесса как минимум один токен.
                    - **Неактивен** — на элементах диаграммы процесса нет токенов.
                    - **Завершён** — процесс завершился ожидаемым образом, на элементах нет токенов.
                    - **Отменён** — процесс был остановлен с удалением всех токенов.
                - **Дата создания** — дата и время создания экземпляра процесса.
                - **Создатель** — аккаунт создателя экземпляра. Перейдите по ссылке, чтобы открыть данные аккаунта.
                - **Шаблон процесса** — название шаблона процесса. Перейдите по ссылке, чтобы открыть конструктор диаграммы процесса.
                - **Запись** — идентификатор записи, связанной с экземпляром процесса. Перейдите по ссылке, чтобы открыть форму записи.
                - **Шаблон записи** — название связанного шаблона записи. Перейдите по ссылке, чтобы открыть список записей.
                - **Версия** — номер версии диаграммы процесса, по которой выполняется экземпляр процесса.
            - **Токены** — список элементов диаграммы процесса, на которых находятся токены. Для процессов со статусом «**Завершён**» эта вкладка содержит надпись «**Нет данных для отображения**». При выборе элемента отображается панель «**Действия**» со следующими кнопками:
                - **Перейти** ‌‌<i class="fa-light fa-external-link-square"></i> к форме пользовательской задачи или к диаграмме подпроцесса. Для этого также можно дважды нажать пользовательскую задачу или подпроцесс на диаграмме.
                - **Перезапустить токен** <i class="fa-light fa-redo"></i> на выбранном элементе.
                - **Удалить токен** <i class="fa-light fa-trash"></i> с выбранного элемента.
            - **Журнал изменений** — список событий, произошедших в ходе выполнения процесса.В журнале изменений отображается подробная информация обо всех токенах и шагах процесса:
                - дата и время создания токена;
                - наименование события;
                - инициатор — аккаунт, создавший токен на элементе;
                - фактический исполнитель задачи;
                - исполнители, указанные в свойствах задачи;
                - дата и время выхода токена из элемента;
                - цепочка событий — нажмите значок рядом с элементом в журнале изменений, чтобы просмотреть цепочку событий для этого элемента.

    _![Информация о токенах на задаче на диаграмме экземпляра процесса](https://kb.comindware.ru/assets/img_6474c6c0e4f23.png)_

7. Перейдите на вкладку «**Журнал изменений**» и разверните задачу _«Рассмотреть заявку»_ для просмотра информации о ней.
8. Задача _«Рассмотреть заявку»_ на диаграмме процесса будет выделена желтым цветом.
9. Аналогично выберите любой другой элемент диаграммы процесса для просмотра сведений о нём.

    _![Журнал изменений задачи на диаграмме экземпляра процесса](https://kb.comindware.ru/assets/img_6474ce0c70e7b.png)_

## Настройка страницы с круговой диаграммой количества заказов

!!! question "Страницы"

    **{{ productName }}** позволяет создавать информационные страницы (дашборды) для мониторинга и анализа статистических данных за определённый период. Информационная страница может содержать диаграммы, списки, показатели и другие виджеты для визуализации бизнес-данных.

!!! warning "Бизнес-логика"

    Перед настройкой и использованием информационной страницы с диаграммой создайте данные для визуализации: создайте и выполните несколько заявок по бизнес-процессу, заполнив _время подачи_ автомобиля датами с разными месяцами.

Настроим информационную страницу с диаграммой, которая будет показывать количество заказов автомобилей по месяцам.

1. На панели навигации слева выберите пункт «**Настройки**» — «**Приложения**».
2. Откройте страницу администрирования приложения _«Управление автопарком»_, дважды нажав его в списке.

    _![Переход к администрированию приложения](https://kb.comindware.ru/assets/img_630e1ebcea236.png)_

3. Выберите пункт «**Разделы навигации**» <i class="fa-light fa-list-dropdown"></i>.
4. В списке разделов навигации нажмите кнопку «**Создать**».
5. Отобразится конструктор раздела навигации.
6. На панели свойств раздела навигации укажите **отображаемое название** раздела навигации _«Сводки»_.
7. Сохраните раздел навигации.
8. Обновите страницу в браузере после сохранения раздела навигации, чтобы последующие шаги выполнялись корректно.

    _![Настройка названия раздела навигации](https://kb.comindware.ru/assets/img_65e88347ab8b8.png)_

9. В панели элементов слева нажмите кнопку «**Создать страницу**» <i class="fa-light fa-plus"></i> рядом с пунктом «**Страницы**».

    _![Создание новой информационной страницы](https://kb.comindware.ru/assets/img_65e883a8b3ed0.png)_

10. Откроется вкладка «**Новая страница**».
11. В панели свойств укажите название страницы _«Статистика заявок»_.
12. Сохраните страницу.
13. Обновите страницу в браузере, чтобы последующие шаги выполнялись корректно. Если браузер выдаст предупреждение о возможной утрате несохранённых изменений, подтвердите обновление страниц.

    _![Переименование и сохранение страницы](https://kb.comindware.ru/assets/img_65e888cf7cc40.png)_

14. Выберите вкладку «**Навигация**».
15. Разверните раздел «**Страницы**» в панели элементов.
16. Нажмите кнопку «**Редактировать**» <i class="fa-light fa-pencil"></i> рядом с пунктом _«Статистика заявок»_ в панели элементов.

    _![Переход к редактированию страницы](https://kb.comindware.ru/assets/img_65e88915bc9a8.png)_

17. Откроется вкладка «**Статистика заявок**».
18. Нажмите кнопку со значком «**Создать диаграмму**» <i class="fa-light fa-plus"></i> рядом с пунктом «**Диаграммы**» в панели элементов.

    _![Создание диаграммы](https://kb.comindware.ru/assets/img_65e88d5672e4a.png)_

19. Откроется конструктор диаграммы.
20. Настройте диаграмму с помощью панели «**Свойства виджета**»:

    - **Название:** _Заявки по месяцам;_
    - **Отображаемое название:** _Заявки по месяцам;_
    - **Тип**: **круговая диаграмма**;
    - **Шаблон:** _Заявки на автомобили_ — источник данных для диаграммы;
    - **Категории:** _Время подачи_ — атрибут, по значениям которого будут сгруппированы записи на диаграмме;
    - **Фильтр по дате**
        - **Атрибут**: **время подачи** —  атрибут типа «**Дата и время**», используемый для фильтрации записей на диаграмме.
        - **Периоды:** **ближайшие месяцы** — интервал, с которым будут сгруппированы записи на диаграмме;
        - **Период по умолчанию:** **текущий месяц** — период, записи за который будут отображаться на диаграмме по умолчанию.

21. Просмотрите и сохраните результирующую диаграмму.

    _![Настройка и сохранение круговой диаграммы](https://kb.comindware.ru/assets/img_630e25f756d04.png)_

22. Нажмите в браузере кнопку «**Назад**», чтобы вернуться к странице «**Статистика заявок**».
23. Перетащите новую **область** на макет страницы и переименуйте ее в _«Отчёты»_.
24. Перетащите диаграмму _«Заявки по месяцам»_ из панели элементов в область _«Отчёты»_.
25. Сохраните страницу _«Статистика заявок»_.

    _![Добавление диаграммы на страницу](https://kb.comindware.ru/assets/img_62432de64e96e.png)_

26. Выберите вкладку «**Навигация**».
27. Перетащите страницу _«Статистика заявок»_ из панели элементов на макет раздела навигации.
28. Сохраните раздел навигации.

    _![Добавление страницы в раздел навигации](https://kb.comindware.ru/assets/img_630e26c5301fd.png)_

## Результаты

Вы научились получать информацию об истории выполнения процессов и создавать информационные страницы для визуализации данных.

!!! note "Примечание"

    Созданный **раздел навигации** _«Сводки»_ мы впоследствии используем в [Уроке 8][lesson_8].

В [следующем уроке][lesson_5] вы познакомитесь с новым типом атрибутов — **Запись**, а также создадите справочник и мастер-данные.

{% include-markdown ".snippets/hyperlinks_mkdocs_to_kb_map.md" %}
