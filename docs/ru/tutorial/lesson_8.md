---
title: Урок 8. Аккаунты
kbId: 4867
---

# Урок 8. Аккаунты {: #lesson_8 }

## Введение

Из этого урока вы узнаете, как спроектировать оргструктуру, создать аккаунты для пользователей и управлять ими: назначать роли, выдавать и ограничивать права доступа, настраивать разделы навигации и назначать исполнителей задач.

Сначала мы создадим роли и настроим права доступа к шаблонам, которые используются в процессе заказа автотранспорта. Затем создадим группы аккаунтов и привяжем их к ролям. После этого укажем исполнителей для задач — выберем в качестве исполнителей созданные группы. Прежде чем тестировать процесс, мы создадим несколько аккаунтов и добавим их в группы.

**Предусловие:** пройдены [Урок 4. Мониторинг и аналитика][lesson_4].

**Расчётная продолжительность:** 15 мин.

{% include-markdown ".snippets/tutorial_version_notice.md" %}

## Роли

Определим роли пользователей нашего приложения:

- _Заказчик_ — сотрудник компании, который должен иметь возможность создавать заявку и просматривать обработанную заявку;
- _Секретарь_ — согласует заявку, должен иметь доступ к редактированию и просмотру заявок;
- _Диспетчер гаража_— принимает заявку и выделяет машину; должен иметь возможность редактировать заявку и формировать отчеты.
- _Водитель_— выполняет рейс и фиксирует затраты.

!!! question "Определения"

    **Роли** задают разрешения на доступ к ресурсам приложения: реестрам данных (шаблонам записей), спискам, кнопкам, формам, задачам бизнес-процесса и др.

    Настройка роли включает в себя:
    - настройку разрешений на доступ к ресурсам приложения;
    - выбор пунктов раздела навигации, который будет отображаться для пользователей, относящихся к этой роли;
    - назначение роли пользователям и (или) группам пользователей.

Создадим роли и настроим для них разрешения…

1. С помощью боковой панели навигации прейдите в раздел «**Настройки**» — «**Приложения**» и откройте приложение _«Управление автопарком»._
2. Перейдите к разделу «**Роли**».

    _![Переход к разделу настройки ролей пользователей бизнес-приложения](https://kb.comindware.ru/assets/img_6315de9b6cd0a.png)_

3. В списке ролей нажмите кнопку «**Создать**». Отобразится страница свойств новой роли.
4. Укажите **название** роли — _«Заказчик»._

    _![Создание роли «Заказчик»](https://kb.comindware.ru/assets/img_6315defc20625.png)_

5. Определим разрешения для роли _«Заказчик»_. _Заказчик_ должен иметь возможность создавать заявки (т. е. инициировать процесс заказа автотранспорта) и завершать задачи. Поэтому настроим разрешения на доступ к шаблону процесса…
6. Перейдите на вкладку «**Разрешения**».
7. В списке слева разверните процесс _«Заказ автотранспорта»_ и перетащите в таблицу разрешений кнопки «**Создать**» и «**Завершить задачу**».
8. Установите флажок (разрешение) в столбце «**Просмотр**» для приложения _«Управление автопарком»._
9. Установите флажки (разрешения) в столбце «**Создание**» и «**Просмотр**» для шаблона процесса _«Заказ автотранспорта»._
10. Для кнопок «**Создать**» и «**Завершить задачу**» установите разрешения «**Использование кнопки**», как показано на иллюстрации.

    _![Настройка разрешений для приложения, шаблона процесса и кнопок «Создать» и «Завершить задачу»](https://kb.comindware.ru/assets/img_6315e22c82b48.png)_

10. Чтобы заказчик смог выбрать тип автомобиля при подаче заявки, он должен иметь возможность просмотра данных из справочника типов автомобилей…
11. Перетащите на таблицу разрешений справочник _«Типы автомобилей»_ и установите для него разрешение «**Просмотр**».

    _![Назначение разрешения «Просмотр» для справочника «Типы автомобилей»](https://kb.comindware.ru/assets/img_6475e0b50cece.png)_

11. Теперь настроим доступ _Заказчика_ к созданию заявок на автомобиль и просмотра списка заявок и формы заявки…
12. Раскройте список _«Заявки на автомобили»_ на панели элементов слева и перетащите список «**Все записи**» в таблицу разрешений.
13. Перетащите в таблицу разрешений форму _«Заявки на автомобили — Основная форма»._
14. Установите разрешения «**Создание**» и «**Просмотр**» для шаблона записи _«Заявки на автомобили»._
15. Установите разрешение «**Просмотр**» для основной формы и таблицы «**Все записи**» шаблона _«Заявки на автомобили»._
16. Сохраните роль _«Заказчик»._

    _![Настройка разрешений роли «Заказчик» для создания и просмотра заявок на автомобиль](https://kb.comindware.ru/assets/img_6315e4ba725ab.png)_

Аналогичным образом создайте роль _«Секретарь»_ и назначьте ей разрешения…

1. На вкладке «**Разрешения**» перетащите в таблицу разрешений процесс _«Заказ автотранспорта»_ и установите разрешения «**Просмотр**» и «**Ввод данных**».
2. Разверните процесс _«Заказ автотранспорта»_ и перетащите в таблицу разрешений кнопки «**Завершить задачу**» и «**Сохранить**».
3. Установите для кнопок «**Завершить задачу**» и «**Сохранить**» разрешение «**Использование кнопки**».
4. Перетащите в таблицу разрешений шаблон _«Заявки на автомобили»_ и установите для него разрешение «**Полный доступ**».
5. Перетащите в таблицу разрешений шаблоны _«Типы автомобилей»_ и _«Статусы заявок»_ и установите для них разрешение «**Просмотр**».
6. Сохраните роль _«Секретарь»_.

_![Настройка разрешений роли «Секретарь»](https://kb.comindware.ru/assets/img_6315e50c0a809.png)_

Создайте роль _«Диспетчер гаража»_ и назначьте ей разрешения…

1. Перейдите на вкладку «**Разрешения**».
2. Перетащите в таблицу разрешений шаблоны _«Заказ автотранспорта», «Заявки на автомобили», «Затраты», «Типы затрат», «Автомобили», «Типы автомобилей», «Статусы заявок»_ и установите для них разрешение «**Полный доступ**».
3. Сохраните роль _«Диспетчер гаража»._

_![Настройка разрешений роли «Диспетчер гаража»](https://kb.comindware.ru/assets/img_6315e533518af.png)_

Создайте роль _«Водитель»_ и назначьте ей разрешения…

1. На вкладке «**Разрешения**» добавьте следующие шаблоны: _«Типы затрат», «Типы автомобилей», «Статусы заявок»_ и установите для них разрешение «**Просмотр**».
2. Для шаблона «Автомобили» установите разрешения «**Просмотр**».
3. Перетащите в таблицу разрешений шаблон _«Заявки на автомобили»_ и установите для него разрешения «**Просмотр**» и «**Ввод данных**».
4. Разверните процесс _«Заказ автотранспорта»_ и перетащите в таблицу разрешений операции «**Сохранить**» и «**Завершить задачу**». Укажите для них разрешение «**Использование кнопки**».
5. Для процесса _«Заказ автотранспорта»_ установите разрешения «**Просмотр**» и «**Ввод данных**».
6. Перетащите в таблицу разрешений шаблон _«Затраты»_ и установите для него разрешения «**Создание**», «**Просмотр**» и «**Ввод данных**».
7. Разверните шаблон _«Затраты»_, перетащите из него в таблицу разрешений таблицу «**Все записи**» и установите для неё разрешение «**Просмотр**»
9. Из шаблона _«Затраты»_ перетащите в таблицу разрешений кнопку «**Создать**» и установите для нее разрешение «**Использование кнопки**».
10. Сохраните роль _«Водитель»._

_![Настройка разрешений роли «Водитель»](https://kb.comindware.ru/assets/img_648059ae643fc.png)_

## Группы аккаунтов

Мы создали роли _«Заказчик», «Секретарь», «Водитель»_ и _«Диспетчер гаража»_ и определили для них разрешения на доступ к ресурсам приложения. Теперь создадим группы аккаунтов и назначим им роли…

1. На боковой панели навигации выберите пункты «**Настройки**» — «**Группы**».
2. В списке групп нажмите кнопку «**Создать**». Укажите название группы — _«Секретари»_ и нажмите кнопку «**Создать**», чтобы сохранить группу.

    _![Создание новой группы аккаунтов](https://kb.comindware.ru/assets/img_631650825585e.png)_

3. Аналогичным образом создайте группы _«Диспетчеры»_ и _«Водители»._
4. Создадим еще одну группу, которая будет включать в себя всех сотрудников…
5. Создайте группу _«Сотрудники»._
6. На вкладке «**Участники**» нажмите в левом столбце группы _«Диспетчеры», «Водители»_ и _«Секретари»_. Они отобразятся в правом столбце будут добавлены в группу _«Сотрудники»._
7. Нажмите кнопку «**Создать**», чтобы сохранить группу.

_![Участники группы «Сотрудники»](https://kb.comindware.ru/assets/img_6316513a2b40c.png)_

_![Список групп аккаунтов](https://kb.comindware.ru/assets/img_631651524e957.png)_

## Привязка групп к ролям

1. На боковой панели выберите пункт «**Настройки**» — «**Роли**».
2. В отобразившемся списке ролей откройте роль _«Заказчик»_, дважды нажав её.

    _![Список ролей](https://kb.comindware.ru/assets/img_631651930c1b4.png)_

3. Заказчиком может являться любой сотрудник, поэтому укажем для него группу _«Сотрудники»…_
4. На вкладке «**Свойства роли**» в области «**Выберите участников роли**» нажмите группу «Сотрудники», чтобы перенести ее в список «**Выбранные аккаунты и группы**».
5. Сохраните роль _«Заказчик»._

    _![Выбор группы аккаунтов для роли «Заказчик»](https://kb.comindware.ru/assets/img_65f0713fde15a.png)_

5. Вернитесь к списку ролей и откройте роль _«Секретарь»._
6. Укажите для роли _«Секретарь»_ группу _«Секретари»_ и сохраните роль.
7. В списке ролей откройте роль _«Диспетчер гаража»_ и укажите для неё группу _«Диспетчеры»._
8. Для роли _«Водитель»_ укажите группу _«Водители»._

## Назначение исполнителей

Мы создали роли, указали для них группы аккаунтов и права доступа. Теперь определим исполнителей для задач процесса _«Заказ автотранспорта»_— укажем созданные группы в качестве исполнителей…

1. На панели навигации выберите пункт «**Настройки**» — «**Приложения**» и перейдите к приложению _«Управление автопарком»._
2. Откройте раздел «**Шаблоны**» и перейдите к шаблону процесса _«Заказ автотранспорта»._
3. Перейдите на вкладку «***Диаграмма**» и нажмите кнопку «**Редактировать**».*
4. Выберите пользовательскую задачу _«Рассмотреть заявку»_ и в меню элемента нажмите кнопку «**Свойства**».

    _![Переход к настройке свойств задачи с диаграммы бизнес-процесса](https://kb.comindware.ru/assets/img_631653d993314.png)_

5. Ранее в качестве исполнителя был указан наш аккаунт, а теперь укажем исполнителями созданные группы…
6. Перейдите на вкладку «**Дополнительные**».
7. В поле «**Исполнители**» снимите флажок со своего аккаунта и установите флажок _«Секретарь»._
8. Нажмите кнопку «**Сохранить**».

_![Назначение исполнителей задачи](https://kb.comindware.ru/assets/img_6244de6eaa5af.png)_

8. Аналогичным образом настроим исполнителей для других задач…
9. Для задачи _«Принять заявку»_ укажите в качестве исполнителя группу _«Диспетчер гаража»._
10. Для задачи _«Выполнить рейс»_ укажите в качестве исполнителя группу _«Водитель»._
11. Опубликуйте диаграмму бизнес-процесса.

Исполнитель задач _«Отменить поездку»_ и _«Совершить поездку»_ будет назначаться автоматически по атрибуту, указанному в их дополнительных свойствах — им будет назначен создатель процесса.

## Создание аккаунтов

Создадим новые аккаунты и определим их в группы…

1. В боковой навигации перейдите выберите пункт «**Настройки**» — «**Аккаунты**».
2. В списке аккаунтов нажмите кнопку «**Создать**».

    _![Список аккаунтов](https://kb.comindware.ru/assets/img_6316549a3a880.png)_

3. В поле «**Язык**» укажите «**Русский**».
4. В поле «**Ф. И. О.**» укажите полное имя пользователя аккаунта.
5. В поле «**Имя пользователя**» — логин, под которым пользователь будет входить в аккаунт.
6. Укажите **пароль** и адрес **эл. почты**.
7. Укажите **должность** _«Диспетчер»_ и **отдел** _«Гараж»._
8. Нажмите кнопку «**Создать**», чтобы сохранить аккаунт.

    _![Создание аккаунта](https://kb.comindware.ru/assets/img_6316553102f6d.png)_

9. Вернитесь к списку аккаунтов и создайте ещё один аккаунт, укажите для него **должность** _«Водитель»_ и **отдел** _«Гараж»._
10. Создайте два аккаунта с **должностью** _«Секретарь»._
11. Создайте аккаунт _Заказчика_ с любой должностью, пользователь которого будет создавать заявку.

    _![Список аккаунтов](https://kb.comindware.ru/assets/img_6244e46e12ca4.png)_

## Список аккаунтов

## Назначение аккаунтам групп

1. На панели навигации выберите пункт «**Настройки**» — «**Группы**».
2. Выберите группу _«Водители»_ и перейдите на вкладку «**Участники**».
3. Укажите участника группы — аккаунт водителя.
4.  Нажмите кнопку «**Сохранить**».

    _![Выбор участников группы](https://kb.comindware.ru/assets/img_6316560011972.png)_

5. Аналогичным образом добавьте аккаунт диспетчера в группу _«Диспетчеры»_, а аккаунты секретарей — в группу _«Секретари»._
6. Добавим пользователя в группу _«Сотрудники»…_
7. Выберите группу _«Сотрудники»_ и добавьте в нее аккаунт, пользователь которого будет создавать заявку, в нашем случае это _«Евгений З.»._

_![Добавление аккаунта заказчика в группу «Сотрудники»](https://kb.comindware.ru/assets/img_6316568089c12.png)_

## Разделы навигации

!!! question "Определения"

    Разделы навигации отображаются на панели навигации слева и позволяют быстро переходить к различным страницам **{{ productName }}**.
    До этого момента мы использовали системный раздел навигации, теперь настроим раздел навигации для каждой роли.

1. Выберите на боковой панели навигации пункт «**Настройки**» — «**Приложения**».
2. В списке приложений выберите _«Управление автопарком»._
3. Перейдите к странице «**Разделы навигации**».
4. В отобразившемся списке разделов навигации нажмите кнопку «**Создать**».
5. С помощью панели свойств укажите **отображаемое название** раздела навигации «Заказчик» и удостоверьтесь, что выбрано **приложение** _«Управление автопарком»._
6. Определим роли, для которых будет настроена боковая панель навигации…
7. Нажмите надпись «**0 ролей**» на панели свойств, чтобы назначить роль, для пользователей которой будет отображаться раздел навигации.
8. В окне _«Роли»_ укажите роль _«Заказчик»_ и нажмите кнопку «**Применить**».

    _![Выбор роли для раздела навигации](https://kb.comindware.ru/assets/img_63165b279ddbd.png)_

8. Теперь определим, какие пункты должны отображаться на боковой панели для _Заказчика_…
9. Перетащите элемент «**Мои задачи**» с левой панели на макет раздела навигации.
10. Разверните пункты «**Шаблоны процессов**», _«Заказ автотранспорта»_и «**Кнопки**» и перетащите кнопку «**Создать**» на макет раздела навигации.
11. Сохраните раздел навигации.

    _![Настройка раздела навигации для роли «Заказчик»](https://kb.comindware.ru/assets/img_63165cc598f78.png)_

**Аналогичным образом создадим раздел навигации для роли *«Секретарь»…***

1. В списке разделов навигации приложения _«Управление автопарком»_ нажмите кнопку «**Создать**».
2. Укажите **отображаемое _название*** раздела навигации *«Секретарь»._
3. Назначьте роль _«Секретарь»._
4. Перетащите пункт «**Мои задачи**» на макет раздела навигации.
5. Разверните пункты «**Шаблоны записей**» → _«Заявки на автомобили»_ → «**Таблицы**».
6. Перетащите таблицу «**Все записи**» на макет раздела навигации.
7. С помощью панели свойств переименуйте пункт «**Все записи**» в _«Заявки на автомобили»._
8. Сохраните раздел навигации.

_![Настройка раздела навигации для роли «Секретарь»](https://kb.comindware.ru/assets/img_63165c5dab942.png)_

**Настроим раздел навигации для сотрудников гаража — водителей и диспетчеров, чтобы они могли обрабатывать заявки и  просматривать сводку заявок по месяцам…**

1. В списке разделов навигации приложения «Управление автопарком» откройте созданный на [Уроке 4][lesson_4] раздел навигации _«Сводки»._
2. Измените **отображаемое название** раздела навигации на _«Сотрудник гаража»._
3. Назначьте две роли: _«Диспетчер гаража»_ и _«Водитель»._
4. Перетащите на макет раздела навигации элемент «**Мои задачи**».
5. Разверните шаблон _«Заявки на автомобили»,_ перетащите на макет раздела навигации таблицу «**Все записи**» и переименуйте её в _«Заявки на автомобили»._
6. Перетащите на макет раздела навигации таблицу «**Все записи**» шаблона _«Затраты»_ и переименуйте её в _«Затраты»._
7. Сохраните раздел навигации.

_![Настройка раздела навигации для роли «Диспетчер гаража»](https://kb.comindware.ru/assets/img_63165d425dc49.png)_

_![Список разделов навигации приложения «Управление автопарком»](https://kb.comindware.ru/assets/img_63165d790da30.png)_

## Тестирование

Для тестирования настроенных ролей и исполнителей вам понадобится несколько раз войти в созданные аккаунты с различными ролями — _«Заказчик», «Секретарь», «Диспетчер гаража»_ и _«Водитель»_. Посмотреть имя пользователя аккаунта можно в разделе «**Настройки**» — «**Аккаунты**». Для удобства проводите тестирование новом окне в режиме _«Инкогнито»_ или разных браузерах.

1. Войдите в аккаунт заказчика.
2. Нажмите кнопку «**Создать**» на боковой панели навигации и заполните поля стартовой формы, чтобы создать заявку на автомобиль и запустить бизнес-процесс.

    _![Боковая панель навигации Заказчика и стартовая форма заявки на автомобиль](https://kb.comindware.ru/assets/img_63165e06bcbf7.png)_

3. Выйдите из системы: для этого нажмите значок пользователя в правом верхнем углу страницы и выберите пункт «**Выход**».

    _![Выход из системы](https://kb.comindware.ru/assets/img_63165e4ce6a95.png)_

4. Войдите в аккаунт секретаря.
5. Перейдите в раздел «**Мои задачи**» с помощью боковой панели навигации.
6. Откройте задачу _«Рассмотреть заявку»_, дважды нажав её.

    _![Представление раздела «Мои задачи» для Секретаря](https://kb.comindware.ru/assets/img_63165ea864bbd.png)_

7. Установите флажок _«Заявка одобрена»_ и завершите задачу.
8. Выйдите из системы.
9. Войдите в аккаунт диспетчера гаража.
10. Перейдите в раздел «**Мои задачи**» и откройте задачу _«Принять заявку»._
11. Выберите автомобиль, установите флажок _«Принято»_ и завершите задачу.
12. Выйдите из системы.

    _![Боковая панель навигации и форма заявки на автомобиль для Диспетчера гаража](https://kb.comindware.ru/assets/img_6316638d89f46.png)_

13. Войдите в аккаунт водителя.
14. Откройте задачу _«Выполнить рейс»_ и заполните данные по затратам.
15. Завершите задачу.

    _![Боковая панель навигации и форма заявки на автомобиль для Водителя](https://kb.comindware.ru/assets/img_63166425945bd.png)_

16. Снова войдите в аккаунт заказчика и завершите задачу _«Совершить поездку»._

## Результаты

Вы научились настраивать роли и определять права доступа, создавать аккаунты и группы, а также настраивать разделы навигации. Вы улучшили процесс: теперь выполнением задач процесса занимаются разные пользователи, имеющие разные роли, а в целях безопасности и удобства использования платформы каждый из них имеет доступ только к тем ресурсам, которые им предназначены.

В  [следующем уроке][lesson_9]  вы познакомитесь с формированием документов с помощью {{ productName }}.

{% include-markdown ".snippets/hyperlinks_mkdocs_to_kb_map.md" %}
