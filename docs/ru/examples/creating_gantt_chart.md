---
tags:
  - диаграмма Ганта
  - список значений
  - формы
  - Gantt chart
  - конструктор форм
hide:
  - tags
---

# Диаграмма Ганта. Настройка

На форме можно разместить диаграмму Ганта, которая будет строиться динамически на основе данных приложения.

Для формирования диаграммы Ганта потребуется создать несколько шаблонов и атрибутов определённых типов. 

См. также раздел «**[Использование диаграммы Ганта](using_gantt_chart.md)**».

*![Пример диаграммы Ганта](gantt_chart_example.png)*

1. Создайте три **[шаблона записи](record_templates.md)**:

    * _Работы_
    * _План работ_
    * _Зависимости работ_

2. В шаблоне _«Работы»_ создайте и поместите на форму атрибуты:

    * _Дата начала_
    * _Дата начала плановая_
    * _Дата окончания_
    * _Дата окончания плановая_
        * **Тип данных**: **дата и время**
    * _Дочерние работы_
        * **Тип данных**: **запись**.
        * **Связанный шаблон**: _Работы_
        * **Хранить несколько значений**: флажок установлен.
        * **Взаимная связь с новым атрибутом**: _Родительская работа_.
    * _Зависимости работ_
        * **Тип данных**: **запись**.
        * **Связанный шаблон**: _Зависимости работ_.
        * **Хранить несколько значений**: флажок установлен.
        * **Взаимная связь с новым атрибутом**: _Зависимая работа_.
    * _Исполнитель_
        * **Тип данных**: **аккаунт**.
    * _Наименование работы_ 
        * **Тип данных**: **текст**.
        * **Использовать как заголовок записей**: флажок установлен.
    * _Позиция в иерархии_
        * **Тип данных**: **текст**.
    * _Прогресс_
        * **Тип данных**: **число**.
        * **Количество знаков после запятой**: **не преобразовывать**

*![Основная форма шаблона «Работы»](creating_gantt_chart_work_template_form.png)*

1. В шаблоне _«Зависимости работ»_ создайте и поместите на основную форму атрибуты:

    * _Задержка_
         * **Тип данных**: **длительность**.
    * _Предшествующая работа_
        * **Тип данных**: **запись**.
        * **Связанный шаблон**: _Работы_.
    * _Наименование зависимости_
        * **Тип данных**: **текст**.
        * **Вычислять автоматически**: флажок установлен.
        * **Вычисляемое значение**:
        ```mysql 
        CONCAT(LIST($Predshestvuyuschayarabota->Naimenovanieraboty,
            " -> ",
            $Zavisimayarabota->Naimenovanieraboty))
        ```
        * Свойство «**Доступ**» на форме: **только чтение**.
    * _Тип связи_
        * **Тип данных**: **список значений**.
        * **Список значений** — четыре значения:
            * **Системное имя**: _startToStart_.
                * **EN**: _Start to start_.
                * **RU**: _Начало-начало_.
            * **Системное имя**: _startToEnd_.
                * **EN**: _Start to end_.
                * **RU**: _Начало-окончание_.
            * **Системное имя**: _endToStart_.
                * **EN**: _End to start_.
                * **RU**: _Окончание-начало_.
            * **Системное имя**: _endToEnd_.
                * **EN**: _End to end_.
                * **RU**: _Окончание-окончание_.
            !!! Warning "Внимание!"
                **Системные имена** значений данного атрибута должны быть именно такими, как указано выше. В противном случае диаграмма Ганта не будет формироваться должным образом.
*![Список значений атрибута «Тип связи»](creating_gantt_chart_link_type_value_list.png)*

*![Основная форма шаблона «Зависимости»](creating_gantt_chart_work_dependency.png)*

1. В шаблоне _«Планы работ»_ создайте и **дважды** поместите на форму атрибут:
    * _Работы_
        * **Тип данных**: **запись**.
        * **Связанный шаблон**: _Работы_
        * **Хранить несколько значений**: флажок установлен.
        * **Взаимная связь с новым атрибутом**: _Связь_.
*![Основная форма шаблона «План работ»](creating_gantt_chart_work_plan_form.png)*

1. Для первого поля _«Работы»_ на форме выберите **представление «Диаграмма Ганта»** и установите следующие свойства диаграммы, выбрав ранее созданные атрибуты:
    * **Наименование**: _Наименование работы_.
    * **Исполнитель**: _Исполнитель_.
    * **Дата начала плановая**: _Дата начала плановая_.
    * **Дата начала**: _Дата начала_.
    * **Дата окончания плановая**: _Дата окончания плановая_.
    * **Дата окончания**: _Дата окончания_.
    * **Процент выполнения**: _Прогресс_.
    * **Форма**: _Работы - Основная форма_.
    * **Дочерние работы**: _Дочерние работы_.
    * **Упорядочивание**: _Номер работы_.
    * **Зависимости**: _Зависимости_.
    * **Предшествующая работа**: _Предшествующая работа_.
    * **Типы связей**: _Тип связи_.
    * **Задержка/опережение**: _Задержка_.

*![Свойства диаграммы Ганта на форме](creating_gantt_chart_properties.png)*

6. Для второго поля _«Работы»_ на форме выберите **представление «Таблица»** и установите следующие свойства таблицы, выбрав ранее созданные атрибуты:
    * **Доступ**: _Разрешить ввод_.
    * **Дочерние записи**: _Дочерние работы_.
    * **Упорядочивание**: _Номер работы_.
    * **Иерархическая нумерация**: _Позиция в иерархии_.
    * Перетащите на область кнопок таблицы кнопки **«Создать»**, **«Добавить»**, **«Исключить»**, **«Редактировать»**, **«Удалить»**.
    * Перетащите в таблицу атрибуты шаблона _«Работы»_: 
        * _«Позиция в иерархии»_ (свойство столбца **«Доступ»**: **только чтение**), 
        * _«Наименование работы»_, 
        * _«Исполнитель»_, 
        * _«Прогресс»_, 
        * _«Дата начала плановая»_, 
        * _«Дата начала»_, 
        * _«Дата окончания плановая»_, 
        * _«Дата окончания»_, 
        * _«Зависимости»_ (в свойствах столбца установите флажки **«Разрешить создание записей»** и **«Разрешить редактирование записей»**).
*![Свойства таблицы работ на форме](creating_gantt_chart_table_properties.png)*

--8<-- "related_topics_heading.md"

**[Диаграмма Ганта. Настройка](using_gantt_chart.md)**

**[Шаблон записи](record_templates.md)**

**[Атрибуты. Определения, типы, настройка, архивирование, удаление][attributes]**
