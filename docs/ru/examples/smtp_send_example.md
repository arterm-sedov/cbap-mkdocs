---
title: Отправка почты SMTP
kbId:
---

# Отправка почты SMTP

## Введение

## Настройка подключения и путей передачи данных

1. Создайте новое подключение типа «**Отправка почты через SMTP**» со следующими настройками:

    - **Системное имя:** _smtpconnection_
    - **Название:** _Отправка уведомлений SMTP_
    - **Хост:** _smtp.test.ru_
    - **Порт: 465**
    - **Тип аутентификации: Базовая**
    - **Имя пользователя:** _test_
    - **Пароль:** _Пароль_
    - **Шифрование: SSL**
    - **Адрес эл. почты отправителя:** _test@test.ru_

2. Создайте новый путь передачи данных со следующими свойствами:

    - **Подключение:** _Отправка уведомлений SMTP_
    - **Системное имя:** _smtproute_
    - **Описание:** _Это путь передачи данных через SMTP_
3. На вкладке «**Интеграция**» задайте следующие параметры:

    - **Шаблон темы:** _{Subject}_
    - **Шаблон текста сообщения:** _{Body}_

## Настройка шаблона записи

1. Создайте шаблон записи _«Уведомления»_.
2. Создайте следующие атрибуты:

    - _Получатель_ типа «**Аккаунт**»;
    - _Тема_ типа «**Текст**»;
    - _Текст уведомления_ типа «**Текст**».

3. Создайте кнопку _«Отправить письмо»_ со следующими свойствами:

    - **Контекст операции: запись**
    - **Операция: вызвать событие «Нажата кнопка»**
    - **Результат выполнения: обновить данные**

4. Добавьте атрибуты на форму.
5. Добавьте кнопку _«Отправить письмо»_ на форму.

## Настройка сценария

1. Создайте сценарий _«Отправка почты»_.
2. В свойствах события «**Нажатие кнопки**» выберите **контекстный шаблон** _«Уведомления»_ и **кнопку** _«Отправить письмо»_.
3. Создайте следующее действие «Сменить контекст»:

    - **Целевой шаблона записи:** _«Уведомления»_
    - **Атрибут или выражение для поиска объектов: Атрибут** `ID`

4. Создайте действие «**Изменить значения переменных**»:

    - **Операция со значениями переменных: заменить**
    - **Набор переменных:** _email_
    - **Переменные:**
        - _To_
        - вложенная в _To_ переменная _Address_ со значением _Эл. почта_ типа **атрибут**
        - _Body_ со значением _Текст уведомления_ типа **атрибут**
        - _Subject_ со значением _Тема_ типа **атрибут**

5. Добавьте действие «Отправить сообщение» со следующими свойствами:

    - **Подключение:** _smtpconnection_
    - **Путь передачи данных:** _smtproute_
    - **Переменная с сообщением:** _email_
