---
kbId:
title:
---

# Отправка HTTP-запросов типа POST. Пример: настройка подключения, пути передачи данных и сценария для обработки запросов в формате JSON {: #http_send_post}

## Введение

**{{ productName }}** позволяет отправлять HTTP-запросы типов `POST` для взаимодействия с внешними системами.

Здесь представлен пример настройки подключения, пути передачи данных и [сценария][scenarios] для отправки HTTP-запросов типа `POST` в формате JSON и записи данных из ответа сервера в атрибуты шаблона записи.

## Прикладная задача

JSON, который отправляем

``` json

## Настройка подключения

1. На странице **Администрирование**» выберите пункт «**Инфраструктура**» — «**Подключения**».
2. Откройте двойным нажатием или создайте подключение типа «**Подключения REST и OData**» — «**Отправка HTTP-запросов**».
3. Настройте подключение к серверу:

    - **Системное имя** — введите уникальное имя подключения.
    --8<-- "system_name_requirements.md:no_autofill"
    - **Отключить** — установите этот флажок, если требуется временно деактивировать данное подключение.
    - **Описание** — введите наглядное описание подключения, например _«Подключение для отправки запросов по HTTP»_.
    - **Запись в файловые журналы** — выберите, какие события следует записывать в журналы:
        - **Полные сведения об обработке сообщения**;
        - **Только ошибки**;
        - **Отключить** — не регистрировать в журнале события отправки запросов.
    - **URI** — укажите адрес сервера, на который будут отправляться запросы.
    - **Формат данных** — выберите **JSON**.
    - **Кодировка данных** — укажите формат кодировки данных, используемый сервером, по умолчанию: **UTF-8**.
    - **Тип аутентификации** — выберите способ проверки подлинности, используемый сервером:
        - **Отсутствует**;
        - **Базовая**;
        - **Аутентификация Windows**.
    - **Имя пользователя** — укажите учётную запись для подключения к серверу.
    - **Пароль** — введите пароль к учётной записи для подключения к серверу.
    - **Домен** — укажите домен пользователя сервера.

4. Проверьте соединение с сервером, нажав соответствующую кнопку.
5. При необходимости нажмите кнопку «**Скачать журнал**», чтобы просмотреть журнал событий получения запросов.
6. Сохраните подключение.

## Настройка пути передачи данных

1. На странице «**Администрирование**» в разделе «**Архитектура**» выберите пункт «[**Пути передачи данных**][communication_routes]» <i class="fa-light fa-route " aria-hidden="true"></i>.
2. Откройте двойным нажатием в списке или создайте путь передачи данных типа «**Подключения REST и OData**» — «**Отправка HTTP-запросов**».
3. Настройте свойства пути передачи данных на следующих вкладках:

    - [**Основные свойства**](#основные-свойства)
    - [**Атрибуты сообщений**](#атрибуты-сообщений)
    - [**Интеграция**](#интеграция)

4. Сохраните путь передачи данных.

### Основные свойства

На вкладке «**Основные свойства**» настройте параметры использования пути передачи данных:

- **Подключение** — выберите [подключение для отправки HTTP-запросов](#настройка-подключения).
- **Системное имя** — введите уникальное имя пути передачи данных.
--8<-- "system_name_requirements.md:no_autofill"
- **Отключить** — установите этот флажок, если требуется временно деактивировать путь передачи данных.
- **Описание** — введите наглядное описание пути передачи данных, например _«Путь передачи данных для отправки файлов по HTTP»_.
- **Номер шины данных** — выберите номер от 0 до 3, если требуется распределить потоки данных нескольких путей для повышения производительности.

### Атрибуты сообщений

!!! warning "Составление атрибута сообщения типа «Объект»"

    Чтобы составить **атрибут сообщения** типа «**Объект**» для хранения имени и содержимого файла, необходимо создать структуру из родительского и дочерних атрибутов:

      - Создайте атрибут типа «**Объект**», задайте его имя, но оставьте значение пустым.
      - Установите флажок у имени родительского атрибута в таблице и нажмите кнопку «**Создать**».
      - Дважды нажмите значок <i class="fa-light fa-angle-down anchor"></i> рядом с родительским атрибутом.
      - В таблице отобразится строка дочернего атрибута.
      - Задайте системное имя и тип дочернего атрибута.

1. Выберите тип сообщения «**Отправка HTTP-запросов с составным содержимым**» или «**Отправка HTTP-запросов**».
2. В таблицу «**Запрос**» добавьте атрибут типа «**Объект**», например _File_.
3. Добавьте дочерние атрибуты типа «**Строка**», например _Name_ и _Content_.

### Интеграция

- Если на вкладке «**Атрибуты сообщений**» выбран тип сообщения «**Отправка HTTP-запросов с составным содержимым**», настройте параметры на вкладке «**Интеграция**» следующим образом:

    1. Выберите **метод запроса POST**.
    2. В таблицу «**Атрибуты для формирования тела запроса (POST, PUT)**» добавьте атрибут _File_ с форматом данных «**Файловая структура**».

- Если на вкладке «**Атрибуты сообщений**» выбран тип сообщения «**Отправка HTTP-запросов**», настройте параметры на вкладке «**Интеграция**» следующим образом:

    1. Выберите **метод запроса POST**.
    2. В поле «**Атрибуты для сериализации в тело запроса**» укажите _File_.

## Настройка шаблона записи

## Настройка сценария