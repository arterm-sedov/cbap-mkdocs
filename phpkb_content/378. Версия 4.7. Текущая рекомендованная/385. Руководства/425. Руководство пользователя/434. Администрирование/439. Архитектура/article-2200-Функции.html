<h1>Функции</h1><div class="md-container">
<div class="md-main__inner md-grid">
<div class="mce-toc">
<h2 class="toc-heading">Содержание</h2>
<ul>
<li><a href="#mcetoc_1hi60lml9p">Введение</a></li>
<li><a href="#mcetoc_1hi60lp45q">Просмотр полного списка функций</a></li>
<li><a href="#mcetoc_1gjrlb8ug2">Просмотр списка функций для приложения</a></li>
<li><a href="#mcetoc_1hi600um0g">Настройка функции</a>
<ul>
<li><a href="#mcetoc_1hi60977ql">Основные настройки</a></li>
<li><a href="#mcetoc_1hi60dg9jo">Сигнатура</a></li>
<li><a href="#mcetoc_1hi604cb1h">Описание</a>
<ul>
<li><a href="#function1">Скрипт C#</a></li>
<li><a href="#function2">Вызов веб-службы</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<h2 id="mcetoc_1hi60lml9p">Введение</h2>
<p>На странице «<strong>Функции</strong>» можно настроить свойства функций, созданных в предыдущих версиях <strong>Comindware Business Application Platform</strong>.</p>
<p><strong>Функции</strong> предназначены для использования в действии «<a href="https://kb.comindware.ru/article.php?id=2609"><strong>Задача-вызов сервиса</strong></a>».</p>
<div class="notice notice-info">
<p class="admonition-title">Примечание</p>
<p>Создание новых функций в <strong>Comindware Business Application Platform</strong> версии 4 не предусмотрено, возможно только редактировать имеющиеся функции.</p>
</div>
<h2 id="mcetoc_1hi60lp45q">Просмотр полного списка функций</h2>
<ol class="colored_numbers_list">
<li>На странице <a href="https://kb.comindware.ru/article.php?id=2191"><strong>«Администрирование»</strong> — «<strong>Архитектура</strong>»</a> выберите пункт «<strong>Функции</strong>» <em class="fal fa-lambda">‌</em>.</li>
<li>Отобразится список функций в составе всех приложений.</li>
</ol>
<div class="screenshot_with_caption">
<p><img alt="Полный список функций" src="https://kb.comindware.ru/assets/functions_page.png"/></p>
<p class="caption">Полный список функций</p>
</div>
<h2 id="mcetoc_1gjrlb8ug2">Просмотр списка функций для приложения</h2>
<ol class="colored_numbers_list">
<li>В разделе <strong>«<a class="autorefs autorefs-internal" href="https://kb.comindware.ru/article.php?id=2209">Администрирование</a>»</strong> приложения выберите пункт «<strong>Функции</strong>» <em class="fal fa-lambda">‌</em>.</li>
<li>Отобразится список функций в составе данного приложения.</li>
</ol>
<div class="screenshot_with_caption">
<p><img alt="Список функций приложения" src="https://kb.comindware.ru/assets/functions_business_app_page.png"/></p>
<p class="caption">Список функций в приложении</p>
</div>
<h2 id="mcetoc_1hi600um0g">Настройка функции</h2>
<ol class="colored_numbers_list">
<li style="box-sizing: border-box; font-size: 15px; font-weight: 300; letter-spacing: 0.2px; line-height: 25px; color: #545764; font-family: 'Open Sans', sans-serif; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><span style="box-sizing: border-box; color: #545764; font-family: 'Open Sans', sans-serif; font-size: 15px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 300; letter-spacing: 0.2px; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; float: none; display: inline !important;">Дважды щелкните строку в </span><span style="box-sizing: border-box; color: #545764; font-family: 'Open Sans', sans-serif; font-size: 15px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 300; letter-spacing: 0.2px; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; float: none; display: inline !important;"><a href="#mcetoc_1hi60lp45q">списке функций</a>. </span></li>
<li style="box-sizing: border-box; font-size: 15px; font-weight: 300; letter-spacing: 0.2px; line-height: 25px; color: #545764; font-family: 'Open Sans', sans-serif; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><span style="box-sizing: border-box; color: #545764; font-family: 'Open Sans', sans-serif; font-size: 15px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 300; letter-spacing: 0.2px; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; float: none; display: inline !important;">Настройте <span style="color: #545764; font-family: 'Open Sans', sans-serif; font-size: 15px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 300; letter-spacing: 0.2px; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;">свойства функции:</span> </span>
<ul>
<li style="box-sizing: border-box; font-size: 15px; font-weight: 300; letter-spacing: 0.2px; line-height: 25px; color: #545764; font-family: 'Open Sans', sans-serif; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><strong><a href="#mcetoc_1hi60977ql">Основные настройки</a></strong></li>
<li><a href="#mcetoc_1hi60dg9jo"><strong>Сигнатура</strong></a></li>
<li><a href="#mcetoc_1hi604cb1h"><strong>Описание</strong></a></li>
</ul>
</li>
<li style="box-sizing: border-box; font-size: 15px; font-weight: 300; letter-spacing: 0.2px; line-height: 25px; color: #545764; font-family: 'Open Sans', sans-serif; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><span style="box-sizing: border-box; color: #545764; font-family: 'Open Sans', sans-serif; font-size: 15px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 300; letter-spacing: 0.2px; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; float: none; display: inline !important;">Нажмите кнопку «<strong>Сохранить</strong>».</span></li>
</ol>
<div class="screenshot_with_caption" style="font-size: 15px !important;">
<p><img alt="Форма создания новой переиспользуемой функции" class="img-responsive" height="548" src="https://kb.comindware.ru/assets/35_967_92.png" width="1350"/></p>
<p class="caption" style="box-sizing: border-box; margin-top: 0px; margin-bottom: 1rem; font-size: 11px !important; font-weight: 300; letter-spacing: 0.2px; line-height: 25px; font-family: 'Open Sans', sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; font-style: italic; text-align: center; color: #666666 !important;"><span style="box-sizing: border-box; font-size: 11pt;">Форма создания новой глобальной функции</span></p>
</div>
<h3 id="mcetoc_1hi60977ql">Основные настройки</h3>
<p>На этой вкладке настраиваются основные параметры функции:</p>
<ul style="list-style-type: disc;">
<li style="list-style-type: disc;"><strong>Имя </strong>— наименование глобальной функции;</li>
<li style="list-style-type: disc;"><strong>Системное имя </strong>— уникальное текстовое имя глобальной функции. Может содержать только буквы латинского алфавита, цифры и знак «_». Заполняется автоматически;</li>
<li style="list-style-type: disc;"><strong>Бизнес-приложение</strong> — бизнес-приложение, в котором применяется глобальная функция;</li>
<li style="list-style-type: disc;"><strong>Описание </strong>— дополнительный комментарий к назначению глобальной функции;</li>
<li style="list-style-type: disc;"><strong>Тип </strong>— выбор вида глобальной функции:
<ul style="list-style-type: circle;">
<li><strong>Абстрактная функция </strong>— используется для отладки сигнатуры;</li>
<li><strong>Скрипт C# </strong>— для вызова скрипта C#;</li>
<li><strong>Вызов веб-службы </strong>— для настройки API запросов к внешней веб-службе.</li>
</ul>
</li>
</ul>
<h3 id="mcetoc_1hi60dg9jo">Сигнатура</h3>
<p>На этой вкладке настраиваются параметры передачи данных на входе в функцию и на выходе из неё:</p>
<ul>
<li><strong>Шаблон сообщения на входе</strong> — создайте или выберите уже существующий Шаблон сообщения для передачи параметров на вход глобальной функции;</li>
<li><strong>Настройка соответствия</strong> — таблица для определения соответствия атрибутов шаблона сообщения с переменными, прописанными во вкладке «<strong>Описание</strong>».</li>
<li><strong>Шаблон сообщения на выходе</strong> — создайте или выберите уже существующий Шаблон сообщения для передачи параметров на выходе из глобальной функции;</li>
<li><strong>Настройка соответствия</strong> — таблица для определения соответствия атрибутов шаблона сообщения с переменными, прописанными во вкладке «<strong>Описание</strong>».</li>
</ul>
<h3 id="mcetoc_1hi604cb1h">Описание</h3>
<p><span style="color: #545764; font-family: 'Open Sans', sans-serif; font-size: 15px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 300; letter-spacing: 0.2px; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;">На этой вкладке задаётся определение глобальной функции в зависимости от выбранного типа: </span></p>
<ul>
<li><strong><a href="#function1"> Скрипт C#  </a></strong></li>
<li><strong><a href="#function2"> Вызов веб-службы </a></strong></li>
</ul>
<h4 id="function1">Скрипт C#</h4>
<ol class="colored_numbers_list">
<li><span style="letter-spacing: 0.2px;">Напишите скрипт. Входные параметры являются параметрами функции. Используйте класс «</span><em style="letter-spacing: 0.2px;">Dictionary&lt;TKey,TValue&gt;</em><span style="letter-spacing: 0.2px;">» для передачи параметров ключа и значения. Ключевые параметры соответствуют выходным параметрам сигнатуры.</span></li>
<li><span style="letter-spacing: 0.2px;">Настройте соответствие между результатом выполнения скрипта и атрибутами выходного шаблона сообщения. Для этого используйте ключи скрипта. Отметьте флаг «</span><span style="box-sizing: border-box; font-weight: 700 !important;"><em>Использовать для вывода результата скрипта</em></span> <strong style="letter-spacing: 0.2px;"> » </strong> <span style="letter-spacing: 0.2px;">, если скрипт возвращает единственное значение без ключа, и вы хотите записать это значение в определенный выходной атрибут.</span></li>
</ol>
<h4 id="function2">Вызов веб-службы</h4>
<ol class="colored_numbers_list">
<li>Зарегистрируйте <strong>Comindware Business Application Platform</strong> во внешней веб-службе в качестве клиента.</li>
<li><span style="letter-spacing: 0.2px;">Настройте аутентификацию </span><strong style="letter-spacing: 0.2px;">Comindware Business Application Platform</strong><span style="letter-spacing: 0.2px;"> во внешней веб-службе.</span></li>
<li><span style="letter-spacing: 0.2px;">Введите параметры описания глобальной функции:</span>
<ul>
<li><strong>Адрес URI веб-службы </strong> — полный адрес URI веб-службы. В адресе обязательно используйте префикс <em>http</em> или  <em>https</em>.</li>
<li><strong> Аутентификация </strong> — выбор метода аутентификации в веб-службе:
<ul style="list-style-type: circle;">
<li><strong> Без аутентификации</strong>;</li>
<li><strong> Базовая аутентификация</strong>.</li>
</ul>
</li>
<li><strong>Логин</strong> — логин для доступа в веб-службу. Доступно при выборе «<strong>Базовая аутентификация</strong>» в поле «<strong>Аутентификация</strong>».</li>
<li><strong>Пароль</strong> — пароль для доступа в веб-службу. Доступно при выборе «<strong>Базовая аутентификация</strong>» в поле «<strong>Аутентификация</strong>».</li>
<li><strong> Заголовки </strong> — таблица настройки заголовков данных, которые будут использоваться в API запросах к веб-службе. Синтаксис заголовков предоставляется веб-службой. Заголовок <strong>Content-Type</strong> является обязательным и может принимать значения <strong>application/json </strong>или <strong>application/xml</strong>.</li>
<li><strong>Метод запроса</strong> — выбор способа запроса в веб-службу:
<ul style="list-style-type: circle;">
<li><strong>GET</strong> — получить данные из веб-службы;</li>
<li><strong>POST </strong>— отправить данные в веб-службу;</li>
<li><strong>PUT </strong>— отправить и изменить данные в веб-службе;</li>
<li><strong>DELETE</strong> — удалить данные из веб-службы.</li>
</ul>
</li>
<li><strong>Текст запроса</strong> — данные, которые должны быть отправлены в веб-службу.</li>
<li><strong>Метод парсинга</strong> — выбор способа парсинга данных, содержащихся в ответе веб-службы:
<ul style="list-style-type: circle;">
<li><strong>Как есть</strong>;</li>
<li><strong>XML</strong>;</li>
<li><strong>JSON</strong>.</li>
</ul>
</li>
<li><strong>Настройка соответствия</strong> —  <span style="color: #545764; font-family: 'Open Sans', sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 300; letter-spacing: 0.2px; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;">таблица для настройки соответствия между атрибутами шаблона сообщения на выходе из функции и данными из ответа веб-службы.  </span></li>
</ul>
</li>
</ol>
</div>
<p><a class="md-top md-icon mkdocs_imported_link" href="#"> <em class="fa-light fa-arrow-up">‌</em> К началу</a></p>
</div>