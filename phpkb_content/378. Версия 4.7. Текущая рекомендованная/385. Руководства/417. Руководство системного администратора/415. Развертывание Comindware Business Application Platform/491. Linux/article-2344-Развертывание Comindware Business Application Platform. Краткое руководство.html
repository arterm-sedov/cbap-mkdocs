<h1>Развертывание Comindware Business Application Platform. Краткое руководство</h1><div class="mce-toc">
<h2 class="toc-heading">Содержание</h2>
<ul>
<li><a href="#mcetoc_1ga10l2ir0">Введение</a></li>
<li><a href="#mcetoc_1ga10nbi21">Установка и запуск Comindware Business Application Platform</a></li>
<li><a href="#mcetoc_1ga11542i2">Инициализация Comindware Business Application Platform</a></li>
</ul>
</div>
<h2 id="mcetoc_1ga10l2ir0">Введение</h2>
<p>Для работы <strong>Comindware Business Application</strong> Platform требуются операционная система, сервер базы данных, веб-сервер, обратный прокси-сервер и сервер журналов.</p>
<p>Для быстрого развертывания Comindware Business Application Platform в среде Linux компания <strong>Comindware</strong> предоставляет дистрибутив с установщиком, настраивающим необходимое программное обеспечение. См. статью «<samp data-name="aid" data-title="" data-value="2398"><span style="color: #0066bc; font-family: Tahoma;"><img src="https://kb.comindware.ru/images/marker.png" style="vertical-align: middle;"/>{Article-ID:2398}</span></samp>».</p>
<p>В настоящем документе представлены инструкции по развертыванию и инициализации <strong>Comindware Business Application Platform</strong> из дистрибутива в операционных системах Альт Сервер, Astra Linux 1.7.0,  РЕД ОС, Rocky Linux и <span style="color: #545764; font-family: 'Open Sans', sans-serif; font-size: 15px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 300; letter-spacing: 0.2px; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: #ffffff; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;">Ubuntu Server 22.04</span>.</p>
<h2 id="mcetoc_1ga10nbi21">Установка и запуск Comindware Business Application Platform</h2>
<ol class="colored_numbers_list">
<li>Перейдите в режим суперпользователя:
<pre class="source_code_container"><code>sudo -i</code></pre>
или
<pre class="source_code_container"><code>su -</code></pre>
</li>
<li>Скачайте и распакуйте дистрибутив <strong>Comindware Business Application Platform</strong> по ссылке, предоставленной компанией Comindware (<code>X.X.XXXX.X</code> — номер версии ПО):
<pre class="source_code_container"><code>tar -xf X.X-release-ru-X.X.XXXX.X.alt.tar.gz</code></pre>
<code></code>или
<pre class="source_code_container"><code>tar -xf X.X-release-ru-X.X.XXXX.X.astra.tar.gz</code></pre>
<code></code>или
<pre class="source_code_container"><code>tar -xf X.X-release-ru-X.X.XXXX.X.debian.tar.gz</code></pre>
<p><code></code>или</p>
<pre class="source_code_container"><code>tar -xf X.X-release-ru-X.X.XXXX.X.redos.tar.gz</code></pre>
<p><code></code>или</p>
<pre class="source_code_container"><code>tar -xf X.X-release-ru-X.X.XXXX.X.rocky.tar.gz</code></pre>
<p>или</p>
<pre class="source_code_container"><code>tar -xf X.X-release-ru-X.X.XXXX.X.ubuntu.tar.gz</code></pre>
</li>
<li><code></code></li>
<li><code></code></li>
<li>Перейдите в распакованную папку:
<pre class="source_code_container"><code>cd CMW_Alt/</code></pre>
<code></code>или
<pre class="source_code_container"><code>cd CMW_Astra/</code></pre>
<p>или</p>
<pre class="source_code_container"><code>cd CMW_Debian/</code></pre>
<p>или</p>
<pre class="source_code_container"><code>cd CMW_Rocky/</code></pre>
<p><code></code>или</p>
<pre class="source_code_container"><code>cd CMW_Redos/</code></pre>
<p>или</p>
<pre class="source_code_container"><code>cd CMW_Ubuntu_22.04/</code></pre>
</li>
<li><a id="install.sh"></a>Установите ПО из дистрибутива:
<pre><code>sh install.sh -p -k [-i=<em><strong>&lt;</strong><strong>instanceName&gt;</strong></em>] [-e] [-d=demo] [-u=www-data] [-g=www-data]<br/></code></pre>
<p>Скрипт <code>install.sh</code> поддерживает следующие ключи:</p>
<ul style="list-style: disc;">
<li><code>k</code> — установить ПО Kafka;</li>
<li><code>e</code> — установить ПО Elasticsearch;</li>
<li><code>p</code> — установить ПО Comindware Business Application Platform;</li>
<li><code>d=demo</code> — создать экземпляр ПО Comindware Business Application Platform c демонстрационной базой данных (необязательный ключ по умолчанию);</li>
<li><code>d=clear</code> — создать экземпляр ПО Comindware Business Application Platform без демонстрационной базы данных;</li>
<li><code>u</code> — пользователь (необязательный ключ);</li>
<li><code>g</code> — группа (необязательный ключ);</li>
<li><code>h</code> — вызов краткой справки по использованию скрипта (этот ключ следует указывать только без остальных ключей);</li>
<li><code>kh=hostname</code> — использовать указанный хост для подключения к ПО Kafka (необязательный ключ);</li>
<li><code>kp=portnumber</code> — использовать указанный порт для подключения к ПО Kafka (необязательный ключ);</li>
<li><code>i=<em><strong>&lt;</strong><strong>instanceName&gt;</strong></em></code> — создать экземпляр ПО с указанным именем (необязательный ключ). Имя экземпляра по умолчанию: <code>cmwdata</code>.
<div class="notice notice-warning">
<p class="admonition-title">Внимание!</p>
<p>Если при установке ПО вы не создадите экземпляр (то есть опустите ключ <code>i=&lt;instanceName&gt;</code>), то впоследствии невозможно будет создать экземпляр с помощью скрипта <code>install.sh</code>.</p>
<p>Для создания экземпляра ПО при наличии установленной версии используйте скрипт <code>create.sh</code>, выполните следующие команды:</p>
<pre class="source_code_container"><code>cd CMW_Ubuntu_22.04/scripts/instance<br/><br/>sh create.sh -n=<em><strong>&lt;</strong><strong>instanceName&gt; </strong></em>[-p=&lt;portNumber&gt;] -v=&lt;versionNumber&gt;<br/></code></pre>
<ul>
<li><code>-n=<em><strong>&lt;</strong><strong>instanceName&gt;</strong></em></code> — создать экземпляр ПО с указанным именем (<strong>обязательный</strong> ключ);</li>
<li><code>-p=&lt;portNumber&gt;</code> — создать экземпляр ПО с указанным именем (необязательный ключ). Порт по умолчанию: 80;<code></code></li>
<li><code>-v=&lt;versionNumber&gt;</code> — номер установленной версии ПО вида: <code>X.X.XXXX.X</code> (например: 4.7.2222.0);</li>
<li><code>-h</code> — вызов краткой справки по использованию скрипта (этот ключ следует указывать только без остальных ключей);</li>
</ul>
</div>
</li>
</ul>
</li>
<li>Если отобразится запрос на перезагрузку ОС, выполните перезагрузку: <br/>
<pre><code>reboot</code></pre>
После перезагрузки ОС заново запустите <a href="#install.sh">установку ПО из дистрибутива (шаг 6)</a>.</li>
<li>Дождитесь завершения установки ПО.</li>
<li>Удостоверьтесь, что основные сервисы установлены, запущены и имеют статус <code>Active (running)</code>: <br/>
<pre class="-"><code>systemctl status comindware<em><strong>&lt;</strong><strong><em>instanceName&gt;</em><br/></strong></em></code><code>systemctl status kafka<br/></code><code>systemctl status nginx<br/></code><code>systemctl status elasticsearch</code> <code></code></pre>
<p>Здесь <code><em><strong>&lt;</strong><strong>instanceName&gt;</strong></em></code> — имя экземпляра ПО.</p>
</li>
<li>Если какой-либо сервис не работает, запустите его: <br/>
<pre class="-"><code><span lang="EN-US">systemctl start comindware<em><strong>&lt;</strong><strong>instanceName&gt;</strong></em><br/>systemctl start kafka<br/>systemctl start nginx<br/>systemctl start elasticsearch<br/></span></code><code></code></pre>
</li>
<li> После успешного завершения установки подождите 3–5 минут. Этого времени обычно достаточно для автоматического запуска и инициализации установленных служб (в зависимости от конфигурации машины).<code></code><code></code></li>
</ol>
<h2 id="mcetoc_1ga11542i2">Инициализация Comindware Business Application Platform</h2>
<ol class="colored_numbers_list">
<li>Запустите веб-браузер и в адресной строке введите: <code>localhost</code></li>
<li>Дождитесь запуска и отображения веб-сайта <strong>Comindware Business Application Platform</strong>, что может занять примерно 5 минут.</li>
<li>Откроется страница создания аккаунта администратора <strong>Comindware Business Application Platform</strong>.
<div class="screenshot_with_caption" style="font-size: 15px !important;">
<p><img alt="Страница создания аккаунта администратора" class="img-responsive" height="673" src="https://kb.comindware.ru/assets/Picture14.png" width="1100"/></p>
<p class="caption" style="font-size: 15px !important;">Страница создания аккаунта администратора</p>
</div>
</li>
<li>Введите учётные данные аккаунта администратора и нажмите кнопку «<strong>Создать аккаунт</strong>».
<div class="notice notice-warning">
<p class="admonition-title">Внимание!</p>
<ul>
<li>В экземпляре ПО всегда должен оставаться хотя бы один аккаунт администратора. Он может потребоваться для восстановления системы.</li>
<li>Аккаунт администратора, созданный при инициализации экземпляра ПО, не следует удалять, даже если впоследствии аккаунты будут синхронизироваться с Active Directory.</li>
</ul>
</div>
</li>
<li>
<p>Если при установке продукта был указан ключ <code>-d=demo</code>, откроется страница инициализации системы.</p>
<div class="screenshot_with_caption" style="font-size: 15px !important;">
<p><img alt="Страница инициализации системы" class="img-responsive" height="486" src="https://kb.comindware.ru/assets/img_63452e8529cca.png" width="736"/></p>
<p class="caption" style="font-size: 15px !important;">Страница инициализации системы</p>
</div>
</li>
<li>Если при установке продукта был указан ключ <code>-d=clear</code> или этот ключ был опущен, откроется страница активации ПО.
<div class="screenshot_with_caption" style="font-size: 15px !important;">
<p><img alt="Страница активации продукта" class="img-responsive" height="478" src="https://kb.comindware.ru/assets/Picture15.png" width="1336"/></p>
<p class="caption" style="font-size: 15px !important;">Страница активации продукта</p>
</div>
</li>
<li>Для первоначального ознакомления с ПО этап активации можно пропустить, нажав кнопку «<strong>Пропустить</strong>».</li>
<li>При необходимости откроется страница настройки подключения к службе Elasticsearch.
<div class="screenshot_with_caption" style="font-size: 15px !important;">
<p><img alt="Настройка подключения к Elasticsearch" class="img-responsive" height="634" src="https://kb.comindware.ru/assets/Picture16.png" width="1269"/></p>
<p class="caption" style="font-size: 15px !important;">Настройка подключения к Elasticsearch</p>
</div>
</li>
<li>В поле «<strong>URI</strong>» введите адрес сервера Elasticsearch, например: <code>http://localhost:9200</code></li>
<li>Оставьте <strong>Имя пользователя </strong>и <strong>Пароль</strong> Elasticsearch пустыми. Или введите их, если в конфигурации Elasticsearch включена аутентификация.</li>
<li>Установите уникальный <strong>Префикс индекса</strong>. Он служит для идентификации в Elasticsearch данных экземпляра ПО. Поэтому во избежание конфликтов данных для каждого экземпляра ПО следует указывать собственный префикс индекса.</li>
<li>Нажмите кнопку «<strong>Далее</strong>».</li>
<li>При необходимости откроется страница инициализации данных в Elasticsearch.
<div class="screenshot_with_caption" style="font-size: 15px !important;">
<p><img alt="Страница инициализации данных в Elasticsearch" class="img-responsive" height="493" src="https://kb.comindware.ru/assets/Picture17.png" width="1684"/></p>
<p class="caption" style="font-size: 15px !important;">Страница инициализации данных в Elasticsearch</p>
</div>
</li>
<li>Нажмите кнопку «<strong>Обновить</strong>».</li>
<li>Дождитесь открытия начальной страницы <strong>Comindware Business Application Platform</strong>.
<div class="screenshot_with_caption" style="font-size: 15px !important;">
<p><img alt="Начальная страница Comindware Business Application Platform" class="img-responsive" height="603" src="https://kb.comindware.ru/assets/img_63452e9321257.png" width="1017"/></p>
<p class="caption" style="font-size: 15px !important;">Начальная страница Comindware Business Application Platform</p>
</div>
</li>
<li>На этом этапе развертывание экземпляра <strong>Comindware Business Application Platform</strong> завершено и можно приступать к созданию и использованию бизнес-приложений.</li>
</ol>
<p><a class="md-top md-icon mkdocs_imported_link" href="#"> <em class="fa-light fa-arrow-up">‌</em> К началу </a></p>